# encoding: utf-8

from parser_iso8583 import *

if __name__ == '__main__':
    
    msg = "02003238640128C182000020000000000010550403102449904108102449040399514840501100000007225376363180000126563000=21010000150010030000403000288WAMPHML100000000000005421499002440013000300300250004000100260015POSSE200130522A00320002040040000300100510003003006200020100740016526194CE486DA110007500370048219000020040002=0000000002004000200780001200790003002012600012014500012022800048000484032DF7A01019F360202f6DF61041F76AE73"
    msg = "080020200000008000000000000000013239313130303031"
    msg = "02003238000101c0800610000000000000120012072315050000122315051207110102000000000298765432303500098765432986022PP1681499584001356000000800000105"
    msg = "0800823A0000000000000400000000000000042009061390000109061304200420001"
    msg = "0810823A000002000000048000000000000004200906139000010906130420042000001031128"
    msg = "02003238640128C182000020000000000001500405081733630866081733040599514840501100000007225376363180000126563000=21010000150010030000405138305WAMPHML100000000000005421499002440013000300300250004000100260015POSSE200130522A00320002040040000300100510003003006200020100740016526194CE486DA110007500370048219000020040002=0000000002004000200780001200790003002012600012014500012022800048000484032DF7A01019F360202f7DF61041F76AE73"   
    
    parse = ParserMessageIso(msg)

    print_iso("<Message Original>"      , msg)
    print_iso("<Message Type Indicator>", parse.get_mti())
    print_iso("<Bitmap>"                , parse.get_bitmap())
    print_iso("<Bits Active>"           , BitmapIso.get_bitmap(parse.bitmap))

    list_de = parse.get_data_element() #list_parse = [55, 48] parse.get_data_element(list_parse)
    
    print("<Data Elements>")
    for bit in range(0,len(list_de)):
        print("\t<Data Element {:03d}> [{}] -> {}\t".format(list_de[bit][0],list_de[bit][1], DataElementIso.BITS_VALUE_TYPE[list_de[bit][0]][1]))
